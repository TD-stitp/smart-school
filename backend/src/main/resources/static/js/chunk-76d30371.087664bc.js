(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76d30371"],{5886:function(e,t,n){},"748a":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={class:"markup-tables flex"},o={class:"table-wrapper"},l=Object(c["createElementVNode"])("legend",null,null,-1),r={class:"white-color"},i={class:"va-table"},s={class:"table-wrapper"},d=Object(c["createElementVNode"])("legend",null,null,-1),u={class:"va-table"},b=Object(c["createElementVNode"])("br",null,null,-1),m=Object(c["createElementVNode"])("br",null,null,-1);function p(e,t,n,p,O,j){var h=Object(c["resolveComponent"])("va-chip"),g=Object(c["resolveComponent"])("auto-ellipsis"),f=Object(c["resolveComponent"])("el-option"),V=Object(c["resolveComponent"])("el-select"),k=Object(c["resolveComponent"])("va-icon-delete"),N=Object(c["resolveComponent"])("va-card-content"),v=Object(c["resolveComponent"])("va-card"),E=Object(c["resolveComponent"])("va-icon-agree"),w=Object(c["resolveComponent"])("va-modal"),x=Object(c["resolveComponent"])("va-input");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",a,[Object(c["createVNode"])(v,{color:"divider",class:"flex mb-4"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(N,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",o,[l,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("tables.headings.reviewed"))+" ",1),Object(c["createVNode"])(h,{class:"mb-2 mr-2 add-button",small:"true",color:"#87CEEB",onClick:t[0]||(t[0]=function(e){return O.addDialog="true"})},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",r,Object(c["toDisplayString"])(e.$t("buttons.add")),1)]})),_:1}),Object(c["createElementVNode"])("table",i,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.account")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.name")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.auth")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.operation")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.users,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(g,{text:t.account},null,8,["text"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(g,{text:t.nickname},null,8,["text"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(V,{size:"small","collapse-tags":"",modelValue:t.permission,"onUpdate:modelValue":function(e){return t.permission=e},placeholder:"请选择",onChange:function(e){return j.setPermission(t)}},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(O.auths,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),Object(c["createElementVNode"])("td",null,[""!=t?(Object(c["openBlock"])(),Object(c["createBlock"])(k,{key:0,class:"icon",title:e.$t("titles.delete"),onClick:function(e){return O.deleteDialog=!0,O.selectedUser=t,O.selectedIndex=n}},null,8,["title","onClick"])):Object(c["createCommentVNode"])("",!0)])])})),128))])])])]})),_:1})]})),_:1}),Object(c["createVNode"])(v,{color:"divider"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(N,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",s,[d,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("tables.headings.beReviewed"))+" ",1),Object(c["createElementVNode"])("table",u,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.account")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.name")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.$t("tables.headings.operation")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.beReviewed,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(g,{text:t.account},null,8,["text"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(g,{text:t.nickname},null,8,["text"])]),Object(c["createElementVNode"])("td",null,[""!=t?(Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:0,class:"icon",title:e.$t("titles.agree"),onClick:function(e){return j.agree(t,n)}},null,8,["title","onClick"])):Object(c["createCommentVNode"])("",!0),""!=t?(Object(c["openBlock"])(),Object(c["createBlock"])(k,{key:1,class:"icon",title:e.$t("titles.disagree"),onClick:function(e){return j.disagree(t,n)}},null,8,["title","onClick"])):Object(c["createCommentVNode"])("",!0)])])})),128))])])])]})),_:1})]})),_:1})]),Object(c["createVNode"])(w,{modelValue:O.deleteDialog,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.deleteDialog=e}),position:"top",size:"large",title:e.$t("modal.tips"),message:e.$t("modal.deleteAdminMessage"),okText:e.$t("modal.delete"),cancelText:e.$t("modal.cancel"),onOk:j.deleteRow},null,8,["modelValue","title","message","okText","cancelText","onOk"]),Object(c["createVNode"])(w,{modelValue:O.addDialog,"onUpdate:modelValue":t[5]||(t[5]=function(e){return O.addDialog=e}),position:"top",size:"large",title:e.$t("modal.addTips"),message:e.$t("modal.addMessage"),okText:e.$t("modal.add"),cancelText:e.$t("modal.cancel"),onOk:j.addUser},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(x,{modelValue:O.account,"onUpdate:modelValue":t[2]||(t[2]=function(e){return O.account=e}),onKeypress:Object(c["withKeys"])(j.addUser,["enter"]),placeholder:e.$t("modal.account"),class:"va-chat__input mr-2"},null,8,["modelValue","onKeypress","placeholder"]),b,Object(c["createVNode"])(x,{modelValue:O.nickname,"onUpdate:modelValue":t[3]||(t[3]=function(e){return O.nickname=e}),onKeypress:Object(c["withKeys"])(j.addUser,["enter"]),placeholder:e.$t("modal.name"),class:"va-chat__input mr-2"},null,8,["modelValue","onKeypress","placeholder"]),m,Object(c["createVNode"])(x,{modelValue:O.password,"onUpdate:modelValue":t[4]||(t[4]=function(e){return O.password=e}),onKeypress:Object(c["withKeys"])(j.addUser,["enter"]),placeholder:e.$t("modal.password"),class:"va-chat__input mr-2"},null,8,["modelValue","onKeypress","placeholder"])]})),_:1},8,["modelValue","title","message","okText","cancelText","onOk"])],64)}var O=n("1da1"),j=(n("96cf"),n("4160"),n("159b"),n("a9e3"),n("a434"),n("ef36")),h=n("ec61"),g=n("aa5b"),f=n("0481"),V={components:{VaIconDelete:j["a"],VaIconAgree:h["a"],AutoEllipsis:g["a"]},setup:function(){var e=Object(c["reactive"])({users:[],beReviewed:[]});return Object(c["onMounted"])(Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(f["a"])("/api/admin/getAdmins","").then((function(t){t.data.options.forEach((function(t){var n="";console.log(t.permission),"ALL"===t.permission?n="完全管理员":"BANNER"===t.permission?n="横幅管理员":"CHANNEL"===t.permission&&(n="频道管理员"),e.users.push({account:t.account,nickname:t.nickname,permission:n})}))}))["catch"]((function(e){console.log(e)})),Object(f["a"])("/api/admin/getBeRevieweds","").then((function(t){t.data.options.forEach((function(t){e.beReviewed.push({account:t.account,nickname:t.nickname})}))}))["catch"]((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))),e},data:function(){return{addDialog:!1,deleteDialog:!1,account:"",nickname:"",password:"",selectedUser:[],selectedIndex:-1,auths:["完全管理员","横幅管理员","频道管理员"],toastColor:"#87CEEB",toastText:"nullText",toastPosition:"top-right",toastDuration:2500}},methods:{launchToast:function(){this.$vaToast.init({message:this.toastText,position:this.toastPosition,color:this.toastColor,duration:Number(this.toastDuration)})},deleteRow:function(){var e=this;Object(f["a"])("/api/admin/deleteAdmin",{account:this.selectedUser.account}).then((function(t){"200"===t.data.code?(e.users.splice(e.selectedIndex,1),e.toastText=t.data.msg,e.launchToast()):console.log("删除失败")}))["catch"]((function(e){console.log(e)}))},addUser:function(){var e=this;Object(f["a"])("/api/admin/addAdmin",{account:this.account,nickname:this.nickname,password:this.password}).then((function(t){"200"===t.data.code&&(e.users.push({account:e.account,nickname:e.nickname,password:e.password}),e.toastText=t.data.msg,e.launchToast(),e.account="",e.nickname="",e.password="")}))["catch"]((function(e){console.log(e)}))},agree:function(e,t){var n=this;Object(f["a"])("/api/admin/agree",{account:e.account}).then((function(c){"200"===c.data.code&&(n.beReviewed.splice(t,1),n.users.push(e),n.toastText=c.data.msg,n.launchToast())}))["catch"]((function(e){console.log(e)}))},disagree:function(e,t){var n=this;Object(f["a"])("/api/admin/disagree",{account:e.account}).then((function(e){"200"===e.data.code&&(n.beReviewed.splice(t,1),n.toastText=e.data.msg,n.launchToast())}))["catch"]((function(e){console.log(e)}))},setPermission:function(e){var t,n=this;"完全管理员"===e.permission?t="ALL":"横幅管理员"===e.permission?t="BANNER":"频道管理员"===e.permission&&(t="CHANNEL"),Object(f["a"])("/api/admin/setPermission",{account:e.account,permission:t}).then((function(e){"200"===e.data.code&&(n.toastText=e.data.msg,n.launchToast())}))["catch"]((function(e){console.log(e)}))}}};n("9d4f");V.render=p;t["default"]=V},8689:function(e,t,n){"use strict";n("b22b")},"8b3e":function(e,t,n){"use strict";n("5886")},"9d4f":function(e,t,n){"use strict";n("eb97")},aa5b:function(e,t,n){"use strict";var c=n("7a23"),a={key:0},o={class:"p"},l={key:1},r={class:"p"};function i(e,t,n,i,s,d){var u=Object(c["resolveComponent"])("va-popover");return n.notification?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createVNode"])(u,{message:n.text,placement:"left",color:"info",trigger:"hover"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",o,Object(c["toDisplayString"])(n.text),1)]})),_:1},8,["message"])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",l,[Object(c["createElementVNode"])("p",r,Object(c["toDisplayString"])(n.text),1)]))}var s={name:"AutoEllipsis",props:{text:{type:String,default:""},notification:{type:Boolean,default:!1}}};n("8b3e");s.render=i;t["a"]=s},b22b:function(e,t,n){},eb97:function(e,t,n){},ec61:function(e,t,n){"use strict";var c=n("7a23"),a=["title"],o=Object(c["createElementVNode"])("svg",{t:"1649510172215",class:"va-icon-agree",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1714",width:"18",height:"18"},[Object(c["createElementVNode"])("path",{d:"M512.2 923.1c-55.5 0-109.4-10.9-160.1-32.3-49-20.7-92.9-50.4-130.7-88.1C183.7 765 154 721 133.3 672 111.9 621.3 101 567.5 101 512s10.9-109.4 32.3-160.1c20.7-49 50.4-92.9 88.1-130.7 37.8-37.8 81.7-67.4 130.7-88.1 50.7-21.4 104.6-32.3 160.1-32.3s109.4 10.9 160.1 32.3c49 20.7 92.9 50.4 130.7 88.1 37.8 37.8 67.4 81.7 88.1 130.7 21.4 50.7 32.3 104.6 32.3 160.1s-10.9 109.4-32.3 160.1c-20.7 49-50.4 92.9-88.1 130.7-37.8 37.8-81.7 67.4-130.7 88.1-50.8 21.4-104.6 32.2-160.1 32.2z m0-781.5C308 141.6 141.9 307.8 141.9 512S308 882.3 512.2 882.3c204.2 0 370.3-166.1 370.3-370.3 0-204.2-166.1-370.4-370.3-370.4z","p-id":"1715"}),Object(c["createElementVNode"])("path",{d:"M748.9 349.2L423.4 674.7","p-id":"1716"}),Object(c["createElementVNode"])("path",{d:"M423.4 695.2c-5.2 0-10.5-2-14.4-6-8-8-8-20.9 0-28.9l325.5-325.5c8-8 20.9-8 28.9 0s8 20.9 0 28.9L437.9 689.2c-4 4-9.2 6-14.5 6z","p-id":"1717"}),Object(c["createElementVNode"])("path",{d:"M275.4 526.7l148 148","p-id":"1718"}),Object(c["createElementVNode"])("path",{d:"M423.4 695.2c-5.2 0-10.5-2-14.4-6l-148-148c-8-8-8-20.9 0-28.9s20.9-8 28.9 0l148 148c8 8 8 20.9 0 28.9-4 4-9.3 6-14.5 6z","p-id":"1719"})],-1),l=[o];function r(e,t,n,o,r,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{title:n.title},l,8,a)}var i={name:"VaIconAgree",props:{title:{type:String,default:"agree"}}};n("8689");i.render=r;t["a"]=i}}]);
//# sourceMappingURL=chunk-76d30371.087664bc.js.map